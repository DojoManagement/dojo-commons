name: Run Unit Tests

on:
  push:
    branches:
      - feature/**
      - develop
      - main
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      # Checkout do cÃ³digo do repositÃ³rio
      - name: Checkout code
        uses: actions/checkout@v4

      # Configurar o Python
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.12"

      - name: Atualizar pip
        run: python -m pip install --upgrade pip
      - name: Instalar uv
        run: python -m pip install --upgrade pip && pip install uv
      - name: ðŸ’¾ Instalar dependÃªncias Python do build
        run: uv sync --no-dev

      - name: Instalar dependÃªncias de teste
        run: uv sync --group test

      # Executar os testes
      - name: Run tests
        run: |
          python -m pytest tests/ --junitxml=test-results.xml
